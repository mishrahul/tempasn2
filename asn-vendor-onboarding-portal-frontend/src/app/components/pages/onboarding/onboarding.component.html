
    <!-- Onboarding Page -->
    <div id="onboarding" class="page">
        <div class="content-area">
            <div class="dashboard-header">
                <h1 class="dashboard-title">ASN 2.1 Onboarding</h1>
                <p class="dashboard-subtitle">
                    Complete your implementation step by step
                </p>
            </div>
            
            <app-alert 
                type="success"
                icon="üéâ"
                note="Step 1 Completed"
                message="Account setup and vendor verification successful. Ready to proceed with ASN 2.1 confirmation.">
            </app-alert>

            <!-- Dynamic Content Area -->
            <div id="onboardingContent">
                 <div class="onboarding mt-5">
                    <p-steps [model]="steps" [(activeIndex)]="activeIndex" [readonly]="false"></p-steps>

                    <!-- Step 1: Confirmation -->
                    <ng-container *ngIf="activeIndex === 0">
                         <div id="confirmationStep" class="mt-5">
                            <div class="asn-card">
                                <h4 class="asn-step-title">
                                    Current Step: {{ onboardingStep[activeIndex+1].title }}
                                </h4>
                                <p class="asn-step-subtitle">{{ onboardingStep[activeIndex+1].description }}</p>

                                <div class="row g-4 mb-4">
                                    <div class="col-md-6 d-flex flex-column">
                                        <h5 class="asn-section-title">Company Details</h5>
                                        <div class="asn-section-card flex-grow-1">
                                            <p><strong>Company:</strong> {{companyInfo?.companyName}}</p>
                                            <p><strong>PAN:</strong> {{companyInfo?.panNumber}}</p>
                                            <p><strong>Contact:</strong> {{companyInfo?.contactPerson}}</p>
                                            <p><strong>Email:</strong> {{companyInfo?.email}}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-6 d-flex flex-column">
                                        <h5 class="asn-section-title">GSTIN Details</h5>
                                        <div class="asn-section-card flex-grow-1">
                                            <div class="gstin-deatils">
                                                <p *ngFor="let gstin of gstinDetails"><strong>{{gstin.state}}: </strong>{{gstin.gstin}} ({{gstin.vendorCode}})</p>
                                                <p *ngIf="!gstinDetails || gstinDetails.length === 0" class="text-muted">
                                                    No GSTIN details available
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button
                                    class="btn btn-primary btn-lg bg-green px-4 py-3 d-block mx-auto fs-6"
                                    [disabled]="isLoading"
                                    (click)="confirmASN()"
                                    [class.loading]="isLoading"
                                    *ngIf="onboardingStep[activeIndex+1]?.status?.toLocaleLowerCase() === 'current'"
                                    >
                                    <span class="spinner" [class.hidden]="!isLoading"></span>
                                    <span>{{ isLoading ? 'Processing Confirmation...' : '‚úÖ Confirm ASN 2.1 Activation' }}</span>
                                </button>
                            </div>
                        </div>
                    </ng-container>

                    <!-- Step 2: Payment -->
                    <ng-container *ngIf="activeIndex === 1">
                        <div id="confirmationStep" class="mt-5">
                            <div class="asn-card">
                                <h4 class="asn-step-title">
                                    Current Step: {{ onboardingStep[activeIndex+1].title }}
                                </h4>
                                <p class="asn-step-subtitle">{{ onboardingStep[activeIndex+1].description }}</p>

                                <div class="row g-4 mb-4">
                                    <div class="col-md-6 d-flex flex-column">
                                        <h5 class="asn-section-title">Company Details</h5>
                                        <div class="asn-section-card flex-grow-1">
                                            <p><strong>Company:</strong> {{companyInfo?.companyName}}</p>
                                            <p><strong>PAN:</strong> {{companyInfo?.panNumber}}</p>
                                            <p><strong>Contact:</strong> {{companyInfo?.contactPerson}}</p>
                                            <p><strong>Email:</strong> {{companyInfo?.email}}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-6 d-flex flex-column">
                                        <h5 class="asn-section-title">Pricing Information</h5>
                                        <div class="asn-section-card bg-green flex-grow-1">
                                            <p><strong>Plan:</strong> Basic Plan</p>
                                            <p><strong>Annual Fee:</strong> ‚Çπ12,000</p>
                                            <p><strong>Setup Fee:</strong> ‚Çπ2,830</p>
                                            <p><strong>GST (18%):</strong> ‚Çπ2,670</p>
                                            <h3 class="mt-4 mb-0">Setup Fee: ‚Çπ17,500</h3>
                                        </div>
                                    </div>
                                </div>

                                <button  class="btn btn-primary bg-blue px-4 py-3 d-block mx-auto fs-6" 
                                    (click)="openPaymentModal()" *ngIf="onboardingStep[activeIndex+1]?.status?.toLocaleLowerCase() === 'current'">
                                    <span>üí≥</span> Pay Now - ‚Çπ17,500
                                </button>
                            </div>
                        </div>
                    </ng-container>

                    <!-- Step 3: Deployment -->
                    <ng-container *ngIf="activeIndex === 2">
                        <div id="confirmationStep" class="mt-5">
                            <div class="asn-card">
                                <h4 class="asn-step-title">
                                    Current Step: {{ onboardingStep[activeIndex+1].title }}
                                </h4>
                                <p class="asn-step-subtitle">{{ onboardingStep[activeIndex+1].description }}</p>

                                <div class="row g-4 mb-4">
                                    <div class="col-md-6">
                                        <div class="plan-card">
                                            <h4 class="asn-section-title">üõ†Ô∏è Self-Deployment</h4>
                                            <p class="asn-step-subtitle">
                                                Deploy independently with our comprehensive resources and
                                                support.
                                            </p>
                                            <ul class="plan-list">
                                                <li>‚úì Complete documentation</li>
                                                <li>‚úì Video tutorials</li>
                                                <li>‚úì 30-min free consultation</li>
                                                <li>‚úì Email support</li>
                                            </ul>
                                            <button
                                                class="btn btn-secondary w-100"
                                                (click)="selectDeployment('self')"
                                                >
                                                Select Self-Deployment
                                            </button>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="plan-card featured">
                                            <h4 class="asn-section-title">üë®‚Äçüíº Assisted Implementation</h4>
                                            <p class="asn-step-subtitle">
                                                Professional implementation with dedicated support team.
                                            </p>
                                            <ul class="plan-list">
                                                <li>‚úì Dedicated account manager</li>
                                                <li>‚úì Professional setup</li>
                                                <li>‚úì Priority support</li>
                                                <li>‚úì Additional ‚Çπ8,000 fee</li>
                                            </ul>
                                            <button
                                                class="btn btn-primary w-100"
                                                (click)="selectDeployment('assisted')"
                                                >
                                                Select Assisted Implementation
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-container>

                    <!-- Step 4: Self-Deployment -->
                    <ng-container *ngIf="activeIndex === 3">
                    </ng-container>
                </div>

            </div>
        </div>
    </div>
